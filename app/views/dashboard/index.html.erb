<h1 style="padding-top: 2rem; padding-bottom: 2rem;">Dashboard</h1>

<table class="table table-striped table-bordered">
  <thead>
    <tr>
      <th>Name</th>
      <th>Completion (percentage of tasks complete)</th>
      <th>Overdue tasks (count)</th>
    </tr>
    <tbody> 
      <% @projects.each do |project| %>
        <tr>
          <td><%= link_to project.name, project_path(project) %></td>
          <td><%= project.tasks.where(complete: true).count * 100 / [project.tasks.count, 1].max %>%</td>
          <td><%= project.tasks.select { |t| Date.today.to_s > "#{t.year}-#{t.month}-#{t.day}" && !t.complete}.count %></td>
        </tr>
      <% end %>
    </tbody>
  </thead>
</table>